<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Perftastic</title>

    <!-- must be the first stylesheet -->
    <link rel="stylesheet" type="text/css" href="js/graphCore.css">

    <link rel="stylesheet" type="text/css" href="js/graph.css">

    <script type="text/javascript">
      if (!window.JSON)
        document.write(unescape("%3Cscript src='jq/json2.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript" src="jq/jquery-nightly.js"></script>
    <script type="text/javascript" src="jq/jquery.ui-1.0/jquery.dimensions.js"></script>
    <script type="text/javascript" src="jq/jquery.ui-1.0/ui.mouse.js"></script>
    <script type="text/javascript" src="jq/jquery.ui-1.0/ui.draggable.js"></script>
    <script type="text/javascript" src="jq/jquery.ui-1.0/ui.droppable.js"></script>
    <script type="text/javascript" src="jq/jquery.ui-1.0/ui.accordion.js"></script>
    <script type="text/javascript" src="jq/jquery.ui-1.0/ui.resizable.js"></script>
    <script type="text/javascript" src="jq/contextmenu.js"></script>
    <link rel="stylesheet" type="text/css" href="jq/jquery.ui-1.0/themes/flora/flora.all.css">

    <!-- Core -->
    <script type="text/javascript" src="js/TinderboxData.js"></script>
    <script type="text/javascript" src="js/DataSet.js"></script>
    <script type="text/javascript" src="js/GraphCanvas.js"></script>

    <script type="text/javascript" src="js/ResizeGraph.js"></script>

    <!-- BonsaiService needs e4x -->
    <script type="text/javascript; e4x=1" src="js/BonsaiService.js"></script>

    <script type="text/javascript" src="js/graphCore.js"></script>

    <script type="text/javascript" src="js/sampledata.js"></script>
    <script type="text/javascript" src="js/graph.js"></script>

  </head>

  <body>
    <!-- Main contents -->

    <table><tr>
    <td class="leftcolumncell">
	  <div class="gradbk">
    <div class="sectionheader">
        <span style="margin: auto" class="rightside smalllink">
            <img onclick="$('#testsel').slideToggle('fast')" src="images/wand.png"></span>
            <span>
                <div id="charttypeicon" class="iconcell" style="margin-right: 2px;"></div>
                Available Graphs
            </span>
    </div>
    
    <div id="testsel">
      <div id="testfilterform">
	<table>
	  <tr>
	    <td>Branch:</td>
	    <td><select id="testbranch" onchange="updateAvailableTests()"></select> <img src="/images/throbber-small.gif" id="throbber" /></td>
	  </tr>

	  <tr>
	    <td>Test:</td>
	    <td><select id="testtest" onchange="updateAvailableTests()"></select></td>
	  </tr>

	  <tr>
	    <td>Platform:</td>
	    <td><select id="testplatform" onchange="updateAvailableTests()"></select></td>
	  </tr>

	  <tr>
	    <td>Machine:</td>
	    <td><select id="testmachine" onchange="updateAvailableTests()"></select></td>
	  </tr>

          <tr>
            <td colspan="2"><input type="checkbox" id="testincludeold" onchange="onIncludeOldChanged()">Include tests without recent data</input></td>
          </tr>
	</table>
      </div>

      <div class="testlist scrollabletestlist" id="availabletests">To view a continuous graph, select the test(s) you want to view via the select menus and then add all the machines running the test.</div>

      <input type="button" value="Show All" onclick="doResetFilter()"></input>
      <input type="button" value="Add All" onclick="doAddAll()"></input>
    </div>
	  </div>
    <br>
    <div class="gradbk">
    <div class="sectionheader"><span>Displayed Graphs</span></div>
    <div class="testlist" id="activetests">

    </div>
    <input type="button" value="Remove All" onclick="doRemoveAll()"></input>
    </div>
    
    <br>

<!--
    <div class="sectionheader">Time range</div>
    <div>
      <input id="load-all-radio"  type="radio" name="dataload" onclick="onDataLoadChanged()" checked>
      all data<br>
      <input id="load-days-radio" type="radio" name="dataload" onclick="onDataLoadChanged()">
      previous <input type="text" value="30" id="load-days-entry" size="3" onchange="onDataLoadChanged()"> days<br>
      <input id="load-between-radio" type="radio" name="dataload" onclick="onDataLoadChanged()">
      between <input type="text" value="" id="load-start-entry" size="7" onchange="onDataLoadChanged()"> and <input type="text" value="" id="load-start-entry" size="7" onchange="onDataLoadChanged()"> (<abbr title="Enter a date in YYYYMMDD[HHMM[ss]] format, or select from the popup">?</abbr>)
    </div>
-->

    </td>
    <td class="contentcell">
      <!-- status line -->
      <div style="width: 100%; height:20px">
         <center><span id="status" class="status"></span></center>
      </div> 

      <!-- small graph -->
      <div class="graph-anchor">
        <div class="smallgraph-size" id="smallgraph-labels-x"></div>
        <div class="smallgraph-size" id="smallgraph-labels-y"></div>
        <canvas id="smallgraph" height="75" width="700"></canvas>
        <span class="clicky-ranges" style="margin-left: 50px;">
          <span>1d</span> <span>7d</span> <span>14d</span> <span>30d</span> <span>90d</span> <span>6m</span> <span>1y</span> <span>All</span> <span style="color: gray;">Custom...</span> <span>Older</span> <span>Newer</span>
        </span>
      </div>
  
      <br></br>
  
      <div class="graph-anchor">
        <div class="graph-size" id="graph-labels-y"></div>
        <canvas id="graph" height="300" width="700"></canvas>
        <div class="graph-size" id="graph-labels-x"></div>
  
          <div class="floater" id="floater"></div>
      </div>

      <table width="100%">
	<tr><td width="60%" valign="top">
	  <div id="toolbox" class="gradbk">
	  <div class="sectionheader"><span>Toolbox</span></div>
	  <div class="toolsblock">
	  <ul>
	    <li>Here's a <a id="linkanchor" href="" target="_new">link to this graph</a>.</li>
	    <li><a id="bonsaianchor" href="" target="_new">Query Bonsai</a> for the selected range.</li>
	    <li>Get the <a id="csvanchor" href="" target="_new">CSV data</a> for the selected range.</li>
	  </ul>

	  <div style="margin: 1em" class="helptext">
	    <p>For Bonsai and raw data queries, the date range of the big graph will be used.  Sweep out a more detailed range by holding down the Shift key.</p>
	  </div>
	  </div>
	  </div>
	</td><td  valign="top">
	  <div id="graphoptionsbox" class="gradbk">
          <div class="sectionheader"><span>Graph Options</span></div>
 	  <div class="toolsblock" style="padding-left: 0.5em;">
	    <div style="height:0.75em"></div>
	    <span>Show derived data:</span><br>
	    <div style="margin-left: 1em;">
	      <input id="derived_none_radio" value="none" type="radio" name="derived_type" checked="1"><label for="derived_none_radio">None</label><br>
	      <input id="derived_avg_radio" value="average" type="radio" name="derived_type"><label for="derived_avg_radio">Average</label><br>
	      <input id="derived_deriv_radio" value="derivative" type="radio" name="derived_type"><label for="derived_deriv_radio">Delta</label><br>
	      <input id="derived_derivpct_radio" value="derivativePercent" type="radio" name="derived_type"><label for="derived_derivpct_radio">Delta (Percentage)</label><br>
	    </div>
	    <input id="autoscalecheckbox" type="checkbox" checked="1"><label for="autoscalecheckbox">Auto-scale vertical axis</label><br>
	    <input id="showfloatercheckbox" type="checkbox" checked="1"><label for="showfloater">Show comparison box</label><br>
	  </div>
         </div>

        </td></tr>
      </table>
    </td></tr>
    </table>

    <!-- the datepicker dialog for series tests -->
    <div id="seriesdialog" class="gradbk">
      <div class="sectionheader"><span style="margin-right: 3px;" class="rightside smalllink"><img onclick="doSeriesDialogCancel();" src="images/cancel.png"></span><span>Select dates (build ID) <img src="/images/throbber-small.gif" class="throbber" /></span></div>
      <select id="datesel" multiple="true"></select>
      <div class="buttonbox">
        <button onclick="doSeriesDialogAdd();">Add</button>
      </div>
      
    </div>

    <!-- logging helper -->
    <div id="log"></div>
    <div class="continous-menu" id="continous-menu">
          <ul>
            <li id="view">View test</li>
          </ul>
        </div>
    <div class="discrete-menu" id="discrete-menu">
          <ul>
            <li id="view">View continuous graph</li>
          </ul>
        </div>
  </body>
</html>
